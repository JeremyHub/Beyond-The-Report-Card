"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
stroke = ~ifelse(!is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Funding",
fillOpacity = 0
) %>%
addLegend("bottomright", colors = met.brewer(palname, 4)[1:4], title = "Per Student Funding", labels = c("$10,000 or less", "$10,000 to $15,000", "15,000 to 20,000", "Greater than 20,000")) %>%
addCircleMarkers(
color = "grey",
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
fillOpacity = 0,
stroke = ~ifelse(is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Show Schools with Unknown Funding",
options = list(visible = FALSE)
) %>%
addLayersControl(overlayGroups = "Show Schools with Unknown Funding",
position = "bottomleft", options = layersControlOptions(collapsed = FALSE)) %>%
addEasyButton(easyButton(
icon = htmltools::HTML("home"), title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 4);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~pal(pp_total_raw_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
stroke = ~ifelse(!is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Funding",
fillOpacity = 0
) %>%
addLegend("bottomright", colors = met.brewer(palname, 4)[1:4], title = "Per Student Funding", labels = c("$10,000 or less", "$10,000 to $15,000", "15,000 to 20,000", "Greater than 20,000")) %>%
addCircleMarkers(
color = "grey",
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
fillOpacity = 0,
stroke = ~ifelse(is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Show Schools with Unknown Funding",
options = list(visible = FALSE)
) %>%
addLayersControl(overlayGroups = "Show Schools with Unknown Funding",
position = "bottomleft", options = layersControlOptions(collapsed = FALSE)) %>%
addEasyButton(easyButton(
icon = "home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 8);}")))
leaf <- leaflet() %>%
addTiles() %>%
addEasyButton(easyButton(
icon = htmltools::span(class = "star", htmltools::HTML("&starf;")),
onClick = JS("function(btn, map){ map.setZoom(1);}")))
leaf
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~pal(pp_total_raw_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
stroke = ~ifelse(!is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Funding",
fillOpacity = 0
) %>%
addLegend("bottomright", colors = met.brewer(palname, 4)[1:4], title = "Per Student Funding", labels = c("$10,000 or less", "$10,000 to $15,000", "15,000 to 20,000", "Greater than 20,000")) %>%
addCircleMarkers(
color = "grey",
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
fillOpacity = 0,
stroke = ~ifelse(is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Show Schools with Unknown Funding",
options = list(visible = FALSE)
) %>%
addLayersControl(overlayGroups = "Show Schools with Unknown Funding",
position = "bottomleft", options = layersControlOptions(collapsed = FALSE)) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 6);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~pal(pp_total_raw_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
stroke = ~ifelse(!is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Funding",
fillOpacity = 0
) %>%
addLegend("bottomright", colors = met.brewer(palname, 4)[1:4], title = "Per Student Funding", labels = c("$10,000 or less", "$10,000 to $15,000", "15,000 to 20,000", "Greater than 20,000")) %>%
addCircleMarkers(
color = "grey",
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
fillOpacity = 0,
stroke = ~ifelse(is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Show Schools with Unknown Funding",
options = list(visible = FALSE)
) %>%
addLayersControl(overlayGroups = "Show Schools with Unknown Funding",
position = "bottomleft", options = layersControlOptions(collapsed = FALSE)) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~pal(pp_total_raw_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
stroke = ~ifelse(!is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Funding",
fillOpacity = 0
) %>%
addLegend("bottomright", colors = met.brewer(palname, 4)[1:4], title = "Per Student Funding", labels = c("$10,000 or less", "$10,000 to $15,000", "15,000 to 20,000", "Greater than 20,000")) %>%
addCircleMarkers(
color = "grey",
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
fillOpacity = 0,
stroke = ~ifelse(is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Show Schools with Unknown Funding",
options = list(visible = FALSE)
) %>%
addLayersControl(overlayGroups = "Show Schools with Unknown Funding",
position = "bottomleft", options = layersControlOptions(collapsed = FALSE)) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5.5);}")))
?addEasyButton
leaf <- leaflet() %>%
addTiles() %>%
addEasyButtonBar(
easyButton(
icon = htmltools::span(class = "star", htmltools::HTML("&starf;")),
onClick = JS("function(btn, map){ alert(\"Button 1\");}")),
easyButton(
icon = htmltools::span(class = "star", htmltools::HTML("&target;")),
onClick = JS("function(btn, map){ alert(\"Button 2\");}")))
leaf
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "fa-home", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 7);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "fa-A", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 9);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "fa-a", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 9);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "a", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "fa-star", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "fa fa-a", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "fa-solid fa-a", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<i class='fa-solid fa-a'></i>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 10);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 12);}")))
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 12);}")),
easyButton(icon = "<span>C</span>", title = "Los Angeles",
onClick = JS("function(btn, map){map.setView([32.96, -118.243], 12);}"))
)
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 12);}")),
easyButton(icon = "<span>C</span>", title = "Los Angeles",
onClick = JS("function(btn, map){map.setView([33.96, -118.243], 12);}"))
)
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 12);}")),
easyButton(icon = "<span>C</span>", title = "Los Angeles",
onClick = JS("function(btn, map){map.setView([33.96, -118.243], 11);}"))
)
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~p1(diff_from_gradecenter_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
group = "Achievement"
) %>%
addLegend(position = "bottomright", colors = met.brewer(palname, 5)[1:5], title = "Achievement", labels = c("3+ years behind", "1-3 years behind",  "Within 1 year of national average",  "1-3 years ahead", "3+ years ahead")) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "San Jose and Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 12);}")),
easyButton(icon = "<span>C</span>", title = "Los Angeles",
onClick = JS("function(btn, map){map.setView([33.96, -118.243], 10);}"))
)
leaflet(mapdata) %>% addProviderTiles(providers$CartoDB.Positron) %>%
addCircleMarkers(
color = ~pal(pp_total_raw_cat),
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
stroke = ~ifelse(!is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Funding",
fillOpacity = 0
) %>%
addLegend("bottomright", colors = met.brewer(palname, 4)[1:4], title = "Per Student Funding", labels = c("$10,000 or less", "$10,000 to $15,000", "15,000 to 20,000", "Greater than 20,000")) %>%
addCircleMarkers(
color = "grey",
radius = ~(as.numeric(ncesenroll)/400),
popup = ~paste0(School,
"<br>Grade Distance from National Average: ", round(diff_from_gradecenter, digits = 3),
"<br>Per Pupil Funding: ", pp_total_raw,
"<br>Enrollment: ", ncesenroll
),
fillOpacity = 0,
stroke = ~ifelse(is.na(pp_total_raw_cat), TRUE, FALSE),
group = "Show Schools with Unknown Funding",
options = list(visible = FALSE)
) %>%
addLayersControl(overlayGroups = "Show Schools with Unknown Funding",
position = "bottomleft", options = layersControlOptions(collapsed = FALSE)) %>%
addEasyButton(easyButton(
icon = "fa-home", title = "Zoom to California",
onClick = JS("function(btn, map){map.setView([36.7783, -119.4179], 5);}"))) %>%
addEasyButtonBar(easyButton(icon = "<span>A</span>", title = "Palo Alto",
onClick = JS("function(btn, map){map.setView([37.379, -122.015], 10);}")),
easyButton(icon = "<span>B</span>", title = "Oakland",
onClick = JS("function(btn, map){map.setView([37.79, -122.26], 12);}")),
easyButton(icon = "<span>C</span>", title = "Los Angeles",
onClick = JS("function(btn, map){map.setView([33.96, -118.243], 10);}"))
)
quarto::quarto_render()
quarto::quarto_render()
quarto::quarto_render()
